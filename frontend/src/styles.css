/* ============================================================
   JPQuiz 글로벌 스타일 — 일본 소도시 감성 테마
   
   디자인 컨셉:
   - 바닷가 기차역, 에노덴, 여름 하늘의 청량한 색감
   - 애니메이션 감성 + 아날로그 느낌
   - 글라스모피즘(glassmorphism) 기반 UI
   ============================================================ */

/* ── CSS 커스텀 프로퍼티 (Design Tokens) ──────────────────────
   왜? 색상을 한 곳에서 관리하면 테마 변경이 용이하고,
   컴포넌트 전체에 일관된 색상 시스템을 유지할 수 있다. */
:root {
  /* 메인 색상 팔레트 — 이미지에서 추출한 색상 */
  --sky: #7EC8E3;
  /* 하늘색: 맑은 여름 하늘 */
  --ocean: #3A86B8;
  /* 바다색: 깊고 시원한 바다 */
  --ocean-deep: #2B6A94;
  /* 진한 바다: 호버/강조용 */
  --train: #5E8B7E;
  /* 열차 초록: 에노덴 기차색 */
  --crossing: #F4D35E;
  /* 건널목 노랑: 따뜻한 악센트 */
  --cloud: #F1FAEE;
  /* 구름 흰색: 배경에 사용 */
  --sand: #FFF8E7;
  /* 모래색: 카드 배경 */
  --dark: #1a2d3d;
  /* 어두운 남색: 텍스트/네비게이션 */
  --text: #2c3e50;
  /* 본문 텍스트 색상 */
  --text-muted: #6b7b8d;
  /* 보조 텍스트 */
  --border-light: rgba(126, 200, 227, 0.3);
  /* 반투명 하늘색 테두리 */

  /* 타이포그래피 */
  --font-display: "M PLUS Rounded 1c", "Noto Sans JP", sans-serif;
  --font-body: "Noto Sans JP", "Noto Sans KR", sans-serif;
  --font-size-body: 16px;
  --font-size-body-mobile: 15px;
  --line-height-body: 1.6;

  /* 레이아웃 */
  --container-main: 1280px;
  --container-content: 960px;
  --gutter-mobile: 16px;
  --gutter-tablet: 24px;
  --gutter-desktop: 48px;
  --gutter-wide: 64px;
  --gutter: var(--gutter-mobile);

  /* Hero 높이: 기본 권장값 + 페이지별 예외값 */
  --hero-height-default: clamp(620px, 80dvh, 860px);
  --hero-height-main-compact: clamp(340px, 40vw, 420px);

  /* 그림자 — 부드러운 그림자로 깊이감 표현 */
  --shadow-sm: 0 2px 8px rgba(58, 134, 184, 0.08);
  --shadow-md: 0 4px 16px rgba(58, 134, 184, 0.12);
  --shadow-lg: 0 8px 32px rgba(58, 134, 184, 0.16);

  /* 둥근 모서리 — 부드러운 느낌 */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-pill: 999px;
  /* 알약형 버튼용 */

  /* 트랜지션 — 부드러운 인터랙션 */
  --ease: cubic-bezier(0.4, 0, 0.2, 1);
  --duration: 0.3s;
}

/* ── 리셋 & 기본 스타일 ──────────────────────────────────── */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-body);
  /* 본문은 가독성을 위해 15~16px 범위로 제한 */
  font-size: clamp(15px, 1.5vw, 16px);
  line-height: var(--line-height-body);
  /* 하늘→바다 그라데이션 배경: 전체 페이지에 청량한 분위기 */
  background: linear-gradient(180deg, var(--cloud) 0%, #e8f4f8 100%);
  color: var(--text);
  min-height: 100vh;
  min-height: 100dvh;
  -webkit-font-smoothing: antialiased;
  /* 폰트 렌더링 부드럽게 */
}

/* ── 레이아웃 ──────────────────────────────────────────── */
.layout {
  min-height: 100vh;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
}

/* ── 헤더 — SaaS 깔끔 스타일 ──────────────────────────── 
   디자인 컨셉:
   - 깔끔한 흰색 배경 + 얇은 border-bottom
   - 여백으로 고급감 표현
   - 로고: 旅(인디고) + Quiz(슬레이트)
   - 메뉴: hover underline 애니메이션
   ============================================================ */
.topbar {
  position: sticky;
  /* 스크롤해도 상단 고정 */
  top: 0;
  z-index: 100;
  background: #fff;
  /* 깔끔한 흰색 */
  border-bottom: 1px solid #e8edf2;
  /* 얇고 부드러운 회색 라인 */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  /* 미세한 그림자 */
}

/* 헤더 내부 컨테이너 — max-width + 중앙 정렬 */
.topbar-inner {
  max-width: var(--container-main);
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px var(--gutter);
  gap: 24px;
}

/* ── 로고 ─────────────────────────────────────────────
   旅(인디고) + Quiz(슬레이트)로 브랜드 개성 표현.
   hover 시 旅 살짝 scale */
.brand {
  text-decoration: none !important;
  display: flex;
  flex-direction: column;
  /* 제목 + 부제 세로 배치 */
  line-height: 1.2;
  transition: all 0.2s var(--ease);
  flex-shrink: 0;
}

.brand:hover .brand-tabi {
  transform: scale(1.08);
  /* hover 시 旅 살짝 확대 */
}

.brand-title {
  font-family: var(--font-display);
  font-size: 22px;
  font-weight: 800;
  letter-spacing: -0.5px;
}

/* 旅 — 인디고 컬러로 강조 */
.brand-tabi {
  color: #4f46e5;
  /* 인디고 600 */
  display: inline-block;
  /* transform 적용을 위해 */
  transition: transform 0.2s var(--ease);
}

/* Quiz — 슬레이트 컬러 */
.brand-quiz {
  color: #1e293b;
  /* 슬레이트 800 */
}

/* 부제: '일본어를 여행처럼' */
.brand-subtitle {
  font-size: 11px;
  color: #94a3b8;
  /* 슬레이트 400 */
  font-weight: 400;
  letter-spacing: 0.5px;
}

/* ── 데스크탑 네비게이션 ──────────────────────────────── */
.topbar-nav {
  display: none;
  /* 모바일에서 숨김 */
  gap: 32px;
  /* 넓은 여백 — SaaS 느낌 */
  align-items: center;
}

/* 개별 네비게이션 링크 */
.nav-link {
  position: relative;
  color: #64748b;
  /* 슬레이트 500 */
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  padding: 6px 0;
  transition: color 0.2s var(--ease);
}

/* hover 시 인디고 색상 전환 */
.nav-link:hover {
  color: #4f46e5;
}

/* hover underline 애니메이션 —
   왜? 바닥에서 중앙으로 퍼지는 라인이 고급스럽다 */
.nav-link::after {
  content: "";
  position: absolute;
  bottom: -2px;
  left: 50%;
  width: 0;
  height: 2px;
  background: #4f46e5;
  border-radius: 1px;
  transition: all 0.25s var(--ease);
  transform: translateX(-50%);
}

.nav-link:hover::after {
  width: 100%;
  /* hover 시 라인 펼쳐짐 */
}

/* 활성 라우터 링크: 현재 페이지 강조 */
.nav-link.router-link-active {
  color: #4f46e5;
  /* 인디고 */
  font-weight: 600;
}

.nav-link.router-link-active::after {
  width: 100%;
  /* 활성 페이지는 항상 라인 표시 */
}

/* ── 오른쪽 액션 영역 ─────────────────────────────────── */
.topbar-actions {
  display: none;
  /* 모바일에서 숨김 */
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

/* 인증 버튼 (로그인/회원가입) */
.btn-auth {
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  padding: 8px 16px;
  border-radius: var(--radius-sm);
  color: #64748b;
  transition: all 0.2s var(--ease);
}

.btn-auth:hover {
  color: #4f46e5;
  background: rgba(79, 70, 229, 0.06);
}

/* 회원가입 — 인디고 강조 버튼 */
.btn-auth-primary {
  background: #4f46e5;
  color: #fff !important;
  border-radius: var(--radius-md);
}

.btn-auth-primary:hover {
  background: #4338ca;
  /* 인디고 700 */
}

/* ── 프로필 드롭다운 ──────────────────────────────────── */
.profile-dropdown {
  position: relative;
}

.profile-trigger {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: 1px solid #e2e8f0;
  /* 슬레이트 200 */
  border-radius: var(--radius-md);
  background: #fff;
  color: #334155;
  /* 슬레이트 700 */
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s var(--ease);
  min-height: 36px;
}

.profile-trigger:hover {
  background: #f8fafc;
  border-color: #cbd5e1;
  transform: none;
  box-shadow: none;
}

.profile-avatar {
  font-size: 16px;
}

.profile-name {
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.profile-arrow {
  font-size: 10px;
  transition: transform 0.2s var(--ease);
  color: #94a3b8;
}

.profile-arrow.open {
  transform: rotate(180deg);
}

/* 드롭다운 메뉴 */
.profile-menu {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  width: 160px;
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: var(--radius-md);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  z-index: 110;
  animation: fadeCheckIn 0.15s var(--ease);
}

.profile-menu-item {
  display: block;
  width: 100%;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 400;
  color: #334155;
  text-decoration: none;
  text-align: left;
  border: none;
  background: none;
  cursor: pointer;
  transition: background 0.15s;
}

.profile-menu-item:hover {
  background: #f1f5f9;
  /* 슬레이트 100 */
  transform: none;
  box-shadow: none;
}

.profile-menu-logout {
  color: #dc3545;
  border-top: 1px solid #f1f5f9;
}

.profile-menu-logout:hover {
  background: rgba(220, 53, 69, 0.06);
}

/* ── 모바일 햄버거 버튼 ───────────────────────────────── */
.mobile-menu-btn {
  display: flex;
  /* 모바일에서만 보임 */
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border: none;
  background: transparent;
  cursor: pointer;
  padding: 0;
  min-height: auto;
}

.mobile-menu-btn:hover {
  background: #f1f5f9;
  border-radius: var(--radius-sm);
  transform: none;
  box-shadow: none;
}

/* 햄버거 라인 (CSS로 만든 3줄 아이콘) */
.hamburger-line {
  display: block;
  width: 20px;
  height: 2px;
  background: #334155;
  border-radius: 1px;
  position: relative;
  transition: all 0.3s var(--ease);
}

.hamburger-line::before,
.hamburger-line::after {
  content: "";
  position: absolute;
  width: 20px;
  height: 2px;
  background: #334155;
  border-radius: 1px;
  left: 0;
  transition: all 0.3s var(--ease);
}

.hamburger-line::before {
  top: -6px;
}

.hamburger-line::after {
  top: 6px;
}

/* 열린 상태: X 모양으로 전환 */
.hamburger-line.open {
  background: transparent;
}

.hamburger-line.open::before {
  top: 0;
  transform: rotate(45deg);
}

.hamburger-line.open::after {
  top: 0;
  transform: rotate(-45deg);
}

/* ── 모바일 메뉴 패널 ─────────────────────────────────── */
.mobile-menu {
  display: flex;
  flex-direction: column;
  padding: 8px 16px 16px;
  border-top: 1px solid #f1f5f9;
  background: #fff;
  animation: slideDown 0.2s var(--ease);
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.mobile-menu-link {
  display: block;
  padding: 12px 8px;
  font-size: 15px;
  font-weight: 500;
  color: #334155;
  text-decoration: none;
  border-bottom: 1px solid #f8fafc;
  transition: color 0.15s;
  background: none;
  border-left: none;
  border-right: none;
  border-top: none;
  text-align: left;
  cursor: pointer;
  width: 100%;
}

.mobile-menu-link:hover {
  color: #4f46e5;
  transform: none;
  box-shadow: none;
}

.mobile-menu-link.router-link-active {
  color: #4f46e5;
  font-weight: 600;
}

.mobile-menu-logout {
  color: #dc3545;
  margin-top: 4px;
  border-top: 1px solid #f1f5f9;
  border-bottom: none;
}

/* ── 반응형: 태블릿 이상에서 데스크탑 UI 표시 ──────────── */
@media (min-width: 768px) {
  .topbar-nav {
    display: flex;
    /* 데스크탑 네비 표시 */
  }

  .topbar-actions {
    display: flex;
    /* 오른쪽 액션 표시 */
  }

  .mobile-menu-btn {
    display: none;
    /* 햄버거 숨김 */
  }

  .mobile-menu {
    display: none;
    /* 모바일 메뉴 숨김 */
  }
}

/* ── 메인 콘텐츠 영역 ─────────────────────────────────── */
.content {
  max-width: var(--container-content);
  margin: 0 auto;
  padding: 24px var(--gutter);
  flex: 1;
  width: 100%;
}

/* ── 카드 컴포넌트 ────────────────────────────────────── */
.card {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(8px);
  border-radius: var(--radius-lg);
  padding: 24px;
  box-shadow: var(--shadow-md);
  border: 1px solid var(--border-light);
}

/* ── 폼 관련 ──────────────────────────────────────────── */
.form,
.field {
  display: grid;
  gap: 10px;
}

input,
select,
textarea,
button {
  font: inherit;
  padding: 10px 14px;
}

input,
select,
textarea {
  border: 2px solid #dce6ec;
  border-radius: var(--radius-sm);
  background: #fff;
  transition: border-color var(--duration) var(--ease);
}

input:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--sky);
  box-shadow: 0 0 0 3px rgba(126, 200, 227, 0.2);
}

/* ── 버튼 기본 스타일 ─────────────────────────────────── */
button {
  border: 0;
  border-radius: var(--radius-sm);
  background: var(--ocean);
  color: white;
  cursor: pointer;
  font-weight: 500;
  min-height: 40px;
  transition: all var(--duration) var(--ease);
}

button:hover {
  background: var(--ocean-deep);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

button:active {
  transform: translateY(0);
}

/* ── 카테고리 칩 ──────────────────────────────────────── */
.categories {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 12px 0 16px;
}

.chip {
  background: rgba(126, 200, 227, 0.15);
  color: var(--ocean);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-pill);
  padding: 6px 14px;
  font-size: 14px;
}

.chip.active {
  background: var(--ocean);
  color: #fff;
  border-color: var(--ocean);
}

/* ── 4지선다 선택지 ───────────────────────────────────── */
.choices {
  list-style: none;
  padding: 0;
}

/* ── 액션 버튼 그룹 ───────────────────────────────────── */
.actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.actions-left {
  justify-content: flex-start;
}

/* ── 텍스트 유틸리티 ──────────────────────────────────── */
.muted {
  color: var(--text-muted);
}

.error {
  color: #dc3545;
  margin-top: 12px;
  font-weight: 500;
}

.success {
  color: #198754;
  margin-top: 12px;
  font-weight: 500;
}

/* ── 링크형 버튼 ──────────────────────────────────────── */
.btn-link {
  display: inline-block;
  padding: 10px 16px;
  border-radius: var(--radius-sm);
  background: var(--ocean);
  color: #fff;
  text-decoration: none;
  font-weight: 500;
  transition: all var(--duration) var(--ease);
}

.btn-link:hover {
  background: var(--ocean-deep);
  transform: translateY(-1px);
}

.btn-link.secondary {
  background: var(--dark);
}

.btn-link.secondary:hover {
  background: #243b4d;
}

/* ── 퀴즈 결과 리스트 ─────────────────────────────────── */
.result-list {
  padding-left: 18px;
  margin-bottom: 16px;
}

/* ── 퀴즈 상단 (진행 바 + 액션) ────────────────────────── */
.quiz-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.quiz-top-actions {
  display: flex;
  gap: 8px;
}

.quiz-progress {
  flex: 1;
}

/* 진행 바 — 바다 그라데이션 */
.progress-track {
  width: 100%;
  height: 10px;
  background: rgba(126, 200, 227, 0.2);
  border-radius: var(--radius-pill);
  overflow: hidden;
  margin-bottom: 12px;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--sky), var(--ocean));
  border-radius: var(--radius-pill);
  transition: width var(--duration) var(--ease);
}

/* ── 신고/즐겨찾기 버튼 ───────────────────────────────── */
.report-button {
  background: #dc3545;
  white-space: nowrap;
}

.favorite-button {
  background: var(--dark);
  white-space: nowrap;
}

.favorite-button.active {
  background: var(--crossing);
  color: var(--dark);
}

/* ── 모달 ─────────────────────────────────────────────── */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(26, 45, 61, 0.6);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
  z-index: 200;
}

.modal-card {
  width: min(520px, 100%);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(12px);
  border-radius: var(--radius-lg);
  padding: 24px;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border-light);
}

/* ── 고스트 버튼 ──────────────────────────────────────── */
.ghost {
  background: rgba(126, 200, 227, 0.1);
  color: var(--ocean);
  border: 1px solid var(--border-light);
}

.ghost:hover {
  background: rgba(126, 200, 227, 0.2);
}

/* ── 마이페이지 ───────────────────────────────────────── */
.mypage-panel+.mypage-panel {
  margin-top: 18px;
}

.mypage-actions {
  justify-content: flex-start;
}

/* ── 통계 ─────────────────────────────────────────────── */
.stats-list {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 6px;
}

.grade-box {
  margin-top: 14px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: 12px;
  background: rgba(241, 250, 238, 0.5);
}

/* ── 문장 조립 ────────────────────────────────────────── */
.sentence-builder {
  display: grid;
  gap: 12px;
  margin-bottom: 12px;
}

.token-pool,
.answer-token-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.token-btn {
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  border: 2px solid var(--border-light);
  background: #fff;
  color: var(--text);
  transition: all var(--duration) var(--ease);
}

.token-btn:hover {
  border-color: var(--sky);
  background: rgba(126, 200, 227, 0.1);
}

.token-answer {
  border: 2px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: 12px;
  background: rgba(241, 250, 238, 0.5);
  min-height: 48px;
}

/* ── 루비(발음 표기) ──────────────────────────────────── */
ruby rt {
  font-size: 11px;
  color: var(--text-muted);
}

/* ── 관리자 페이지 ────────────────────────────────────── */
.admin-section+.admin-section {
  margin-top: 20px;
}

.admin-stats-filters {
  margin: 12px 0 16px;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
}

.field-inline {
  display: grid;
  gap: 6px;
}

.stats-grid {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
}

.stat-card {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: 14px;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(4px);
}

.stat-label {
  margin: 0;
  font-size: 13px;
  color: var(--text-muted);
}

.stat-value {
  margin: 8px 0 0;
  font-size: 22px;
  font-weight: 700;
  color: var(--ocean);
}

/* ── 스크롤바 커스터마이징 ────────────────────────────── */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(126, 200, 227, 0.3);
  border-radius: var(--radius-pill);
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(126, 200, 227, 0.5);
}

/* ── 반응형 (모바일) ──────────────────────────────────── */
@media (max-width: 767px) {
  :root {
    --gutter: var(--gutter-mobile);
  }

  /* 모바일: 버튼 최소 터치 영역 44x44 보장 */
  button {
    min-height: 44px;
  }
}

@media (min-width: 768px) and (max-width: 1023px) {
  :root {
    --gutter: var(--gutter-tablet);
  }
}

@media (min-width: 1024px) and (max-width: 1439px) {
  :root {
    --gutter: var(--gutter-desktop);
  }
}

@media (min-width: 1440px) {
  :root {
    --gutter: var(--gutter-wide);
  }
}